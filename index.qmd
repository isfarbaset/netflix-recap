---
title: ""
format:
  html:
    toc: false
execute:
  echo: false
jupyter: python3
---

```{python}
#| include: false
import json
from pathlib import Path

# Load stats
stats_file = Path("data/wrapped_stats.json")
if stats_file.exists():
    with open(stats_file) as f:
        stats = json.load(f)
else:
    # Sample data for preview
    stats = {
        "year": 2024,
        "total_titles_watched": 847,
        "unique_shows": 156,
        "estimated_hours": 635,
        "estimated_days": 26.5,
        "number_one_show": "Breaking Bad",
        "number_one_count": 62,
        "peak_month": "October",
        "peak_month_count": 112,
        "favorite_day": "Saturday",
        "favorite_day_count": 186,
        "longest_streak": 23,
        "binge_sessions": 34,
        "biggest_binge": 12,
        "biggest_binge_show": "Stranger Things",
        "active_days": 289,
        "peak_time": "Evening (6pm-10pm)",
        "personality": {
            "type": "The Binge Master",
            "description": "One more episode? Make that ten. Sleep is optional when the plot thickens."
        },
        "top_shows": [
            {"title": "Breaking Bad", "count": 62},
            {"title": "The Office", "count": 48},
            {"title": "Stranger Things", "count": 45},
            {"title": "Money Heist", "count": 38},
            {"title": "Dark", "count": 32}
        ],
        "monthly_breakdown": {
            "January": 65, "February": 58, "March": 72, "April": 68,
            "May": 55, "June": 62, "July": 78, "August": 85,
            "September": 92, "October": 112, "November": 98, "December": 102
        },
        "fun_facts": [
            "You could have flown to Tokyo 45.4 times with your watch time.",
            "In this time, you could have read approximately 106 books. But who is counting?",
            "Your 23-day streak shows true dedication. Netflix should send you a trophy.",
            "With 34 binge sessions, you have mastered the art of just one more episode."
        ]
    }

year = stats.get("year", 2024)
hours = stats.get("estimated_hours", 0)
days = stats.get("estimated_days", 0)
total = stats.get("total_titles_watched", 0)
shows = stats.get("unique_shows", 0)
top_show = stats.get("number_one_show", "Unknown")
top_count = stats.get("number_one_count", 0)
personality = stats.get("personality", {})
```

::: {.hero}
# NETFLIX WRAPPED

::: {.subtitle}
Your Year in Streaming
:::

::: {.year}
`{python} year`
:::

:::


::: {.wrapped-section}
::: {.section-title}
THE BIG PICTURE
:::

::: {.stats-grid}

::: {.stat-card}
::: {.number}
`{python} f"{hours:,.0f}"`
:::
::: {.label}
Hours Watched
:::
::: {.detail}
That's `{python} f"{days:.1f}"` days of pure entertainment
:::
:::

::: {.stat-card}
::: {.number}
`{python} f"{total:,}"`
:::
::: {.label}
Titles Watched
:::
::: {.detail}
Episodes, movies, documentaries - you name it
:::
:::

::: {.stat-card}
::: {.number}
`{python} shows`
:::
::: {.label}
Unique Shows
:::
::: {.detail}
Your taste is impressively diverse
:::
:::

::: {.stat-card}
::: {.number}
`{python} stats.get('active_days', 0)`
:::
::: {.label}
Active Days
:::
::: {.detail}
Days you pressed play this year
:::
:::

:::
:::


::: {.wrapped-section .highlight}

::: {.section-title}
YOUR STREAMING PERSONALITY
:::

::: {.personality-badge}
::: {.type}
`{python} personality.get('type', 'The Viewer')`
:::
::: {.description}
`{python} personality.get('description', 'You have unique viewing habits.')`
:::
:::

:::


::: {.wrapped-section}
::: {.section-title}
YOUR NUMBER ONE
:::

::: {.stat-card style="max-width: 600px; margin: 0 auto; text-align: center;"}
::: {.number style="font-size: 2.5rem;"}
`{python} top_show`
:::
::: {.label}
Most Watched Show
:::
::: {.detail}
You watched `{python} top_count` episodes. A true fan.
:::
:::

[See all your top shows](/stats.html){.btn .btn-primary style="display: block; width: fit-content; margin: 2rem auto; padding: 1rem 2rem; background: var(--netflix-red); border: none; border-radius: 8px; text-decoration: none; color: white; font-weight: bold;"}

:::


::: {.wrapped-section}
::: {.section-title}
WHEN YOU WATCHED
:::

```{python}
#| output: asis
monthly = stats.get("monthly_breakdown", {})
if monthly:
    max_val = max(monthly.values()) if monthly.values() else 1
    
    print('<div class="month-bars">')
    for month in ["January", "February", "March", "April", "May", "June", 
                  "July", "August", "September", "October", "November", "December"]:
        count = monthly.get(month, 0)
        height = (count / max_val) * 180 if max_val > 0 else 10
        print(f'<div class="month-bar" style="height: {height}px;" title="{month}: {count}"></div>')
    print('</div>')
    
    print('<div style="display: flex; justify-content: space-between; padding: 0 1rem;">')
    for month in ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]:
        print(f'<span class="month-label">{month}</span>')
    print('</div>')
```

::: {.stat-card style="margin-top: 2rem; text-align: center;"}
::: {.detail}
Peak month: **`{python} stats.get('peak_month', 'Unknown')`** with `{python} stats.get('peak_month_count', 0)` titles watched
:::
:::

:::


::: {.wrapped-section}
::: {.section-title}
FUN FACTS
:::

```{python}
#| output: asis
facts = stats.get("fun_facts", [])
for fact in facts:
    print(f'<div class="fun-fact">{fact}</div>')

# Add some extra stats as fun facts
streak = stats.get("longest_streak", 0)
binges = stats.get("binge_sessions", 0)
fav_day = stats.get("favorite_day", "Unknown")

print(f'<div class="fun-fact">Your favorite day to watch was <span class="highlight">{fav_day}</span>.</div>')
print(f'<div class="fun-fact">You went on a <span class="highlight">{streak}-day</span> watching streak. Commitment level: expert.</div>')
if binges > 0:
    print(f'<div class="fun-fact">You had <span class="highlight">{binges}</span> official binge sessions this year.</div>')
```

:::


::: {.wrapped-footer}
::: {.tagline}
Now go take a break. You have earned it!
:::
Thanks for streaming. See you next year.
:::
